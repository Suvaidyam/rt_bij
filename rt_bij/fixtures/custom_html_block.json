[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Document</title>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\">\n</head>\n\n<body>\n    <div class=\"flexbox\">\n        <div class=\"flexboxIn1\">\n            <select name=\"cars\" class=\"dropdown\" id=\"activity_select\">\n                <option value=\"volvo\" disabled selected>Thrust</option>\n                <option value=\"Activity CR4SD\">Activity CR4SD</option>\n                <option value=\"CR4SD Output Form\">CR4SD Output Form</option>\n                <option value=\"Activity   ICVD\">Activity ICVD</option>\n                <option value=\"IVCD Output Form\">IVCD Output Form</option>\n            </select>\n            <select name=\"cars\" class=\"dropdown\" id=\"output_id\"><option value=\"\" disabled selected>Output</option></select>\n            <select name=\"cars\" class=\"dropdown\" id=\"activity_id\"><option value=\"\" disabled selected>Activity</option></select>\n            <select name=\"cars\" class=\"dropdown\" id=\"state_id\"><option value=\"\" disabled selected>State</option></select>\n        </div>\n        <div class=\"flexboxIn2\">\n            <button class=\"dropdown_s2\" id=\"apply_filter\">Apply Filter</button>\n        </div>\n    </div>\n    <div class=\"footer\">\n        Viewing data for: IVCD, Output 11, Activity 113, Maharashtra, All districts\n    </div>\n    \n    \n    <!--Activity -->\n    \n    <div class=\"d-flex justify-content-between mt-3\">\n    <div class=\"bg-danger p-4 rounded-lg shadow-sm w-25 m-1 card1\" style=\"background: #aff3c6 !important;\">\n        <h5 class=\"font-weight-bold\">No. of activities conducted</h5>\n        <p class=\"text-lg font-weight-semibold\">600</p>\n    </div>\n    <div class=\"bg-warning p-4 rounded-lg shadow-sm w-25 ml-4 card2\" style=\"background: #bde3fc !important;\">\n        <h5 class=\"font-weight-bold\">No. of beneficiaries reached</h5>\n        <p class=\"text-lg font-weight-semibold\">20,000</p>\n    </div>\n    <div class=\"bg-info p-4 rounded-lg shadow-sm w-25 ml-4 card3\" style=\"background: #fee8a3 !important;\">\n        <h5 class=\"font-weight-bold\">No. of approvals pending</h5>\n        <p class=\"text-lg font-weight-semibold\">80</p>\n    </div>\n    <div class=\"bg-secondary p-4 rounded-lg shadow-sm w-25 ml-4 card4\" style=\"background: #fee8a3 !important;\">\n        <h5 class=\"font-weight-bold\">Rejected</h5>\n        <p class=\"text-lg font-weight-semibold\">20</p>\n    </div>\n</div>\n\n    \n    <!--card-->\n    \n    <div class=\"container-fluid d-flex justify-content-center\">\n        <div class=\"col bg-white p-4 rounded-lg shadow-sm  mt-3\" style=\"background: #F3F3F3 !important;\">\n            <h2 class=\"text-lg font-semibold mb-4\">\n                CRS4D: Climate Resilience for Sustainable Development\n            </h2>\n            <div class=\"row\">\n                <div class=\"col-6 mb-3\">\n                    <div class=\"bg-info card1 p-3 rounded-lg\" style=\"background: #96b5f2 !important;\">\n                        <p>Diversification of Food Basket</p>\n                        <p class=\"font-semibold\">600</p>\n                    </div>\n                </div>\n                <div class=\"col-6\">\n                    <div class=\"bg-warning card2 p-3 rounded-lg\" style=\"background: #fbcd38 !important;\">\n                        <p>Water Harvesting Capacity Created</p>\n                        <p class=\"font-semibold\">600</p>\n                    </div>\n                </div>\n                <div class=\"col-6 mb-3\">\n                    <div class=\"bg-secondary text-white card3 p-3 rounded-lg\" style=\"background: #5cb771 !important;\">\n                        <p>Drinking Water Capacity Created</p>\n                        <p class=\"font-semibold\">600</p>\n                    </div>\n                </div>\n                <div class=\"col-6 mb-3\">\n                    <div class=\"bg-danger card4 p-3 rounded-lg\" style=\"background: #f39f3b !important;\">\n                        <p>Crop Water Budgeting</p>\n                        <p class=\"font-semibold\">600</p>\n                    </div>\n                </div>\n                <div class=\"col-12\">\n                    <div class=\"bg-success p-3 card5 rounded-lg\" style=\"background: #fee8a3 !important;\">\n                        <p>Grey Water Treatment(Water Recycle)</p>\n                        <p class=\"font-semibold\">600</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"col bg-white ml-4 p-4 rounded-lg shadow-sm  mt-3\" style=\"background: #F3F3F3 !important;\">\n            <h2 class=\"text-lg font-semibold text-dark mb-4\">\n                Integrated Value Chain Development (IVCD)\n            </h2>\n            <div class=\"row\">\n                <div class=\"col-6\">\n                    <div class=\"bg-warning card6 p-3 text-white rounded-lg\" style=\"background: #5cb771 !important;\">\n                        <p>No. of producers</p>\n                        <p class=\"font-semibold\">600</p>\n                    </div>\n                </div>\n                <div class=\"col-6 mb-3\">\n                    <div class=\"bg-success card7 p-3 rounded-lg\" style=\"background: #fbcd38 !important;\">\n                        <p>Value of transaction</p>\n                        <p class=\"font-semibold\">600</p>\n                    </div>\n                </div>\n                <div class=\"col-12\">\n                    <div class=\"bg-secondary card8 p-3 rounded-lg\" style=\"background: #b3b3b3 !important;\">\n                        <p>Value of transaction</p>\n                        <p class=\"font-semibold\">600</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <!--scripts-->\n    <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\"></script>\n    <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\"></script>\n</body>\n\n</html>",
  "modified": "2024-05-16 18:26:11.227492",
  "name": "Dashbord Block",
  "private": 0,
  "roles": [],
  "script": "async function callAPI(options) {\n  return new Promise((resolve, reject) => {\n    frappe.call({\n      ...options,\n      callback: async function (response) {\n        resolve(response?.message || response?.value)\n      }\n    });\n  })\n}\n\n//  Get State List\ncallAPI({\n  method: 'rt_bij.api.common_api',\n  freeze: true,\n  args: {\n      doctype_name: \"State\",\n      fields: [\"name\",\"state_name\"]\n  },\n  freeze_message: __(\"Getting States\"),\n}).then(state_list => {\n  let stateSelectElement = root_element.getElementById('state_id');\n  state_list.forEach(state => {\n    stateSelectElement.innerHTML += `<option value=\"${state.name}\">${state.state_name}</option>`;\n  });\n});\n\n\nvar selectElement = root_element.getElementById('activity_select');\nvar select_output = root_element.getElementById('output_id');\nvar select_activity = root_element.getElementById('activity_id');\nvar apply_filter = root_element.getElementById('apply_filter');\nlet thrust_form = function(selectedValue) {\n    callAPI({\n        method: 'rt_bij.api.common_api',\n        freeze: true,\n        args: {\n            doctype_name: \"Options\",\n            fields: [\"name\", \"option_type\", \"option_name\", \"output\"]\n        },\n        freeze_message: __(\"Getting Options\"),\n    }).then(options_lists => {\n        let select_output = root_element.getElementById('output_id');\n            select_output.innerHTML = \"<option value='' disabled selected>Output</option>\";\n            select_output.innerHTML = \"<option value='' disabled selected>Output</option>\";\n        let select_activity = root_element.getElementById('activity_id');\n            select_activity.innerHTML = \"<option value='' disabled selected>Activity</option>\";\n            select_activity.disabled = false;\n        if(selectedValue ===\"CR4SD Output Form\"){\n            let select_output = root_element.getElementById('activity_id');\n                select_output.disabled = true;\n        }\n        if (selectedValue === \"Activity CR4SD\" || selectedValue === \"CR4SD Output Form\") {\n            const outputFiltered = options_lists.filter(option_list => option_list.option_type === 'Output');\n            outputFiltered.forEach(option_list => {\n                select_output.innerHTML += `<option value=\"${option_list.name}\">${option_list.option_name}</option>`;\n            });\n        } else if (selectedValue === \"Activity   ICVD\") {\n            const outputFiltered = options_lists.filter(option_list => option_list.option_type === 'Output ICVD');\n            outputFiltered.forEach(option_list => {\n                select_output.innerHTML += `<option value=\"${option_list.name}\">${option_list.option_name}</option>`;\n            });\n        } else if (selectedValue === \"IVCD Output Form\") {\n            const outputFiltered = options_lists.filter(option_list => option_list.option_type === 'Output IVCD');\n            outputFiltered.forEach(option_list => {\n                select_output.innerHTML += `<option value=\"${option_list.name}\">${option_list.option_name}</option>`;\n            });\n        }\n    }).catch(error => {\n        console.error('Error fetching options:', error);\n    });\n};\nselectElement.addEventListener('change', function() {\n    var selectedOption = selectElement.options[selectElement.selectedIndex];\n    var selectedValue = selectedOption.value;\n    thrust_form(selectedValue);\n});\nlet output = function(selectedValue) {\n    callAPI({\n        method: 'rt_bij.api.common_api',\n        freeze: true,\n        args: {\n            doctype_name: \"Options\",\n            fields: [\"name\", \"option_type\", \"option_name\", \"output\"]\n        },\n        freeze_message: __(\"Getting Options\"),\n    }).then(options_lists => {\n        let select_output = root_element.getElementById('activity_id');\n        select_output.innerHTML =  \"<option value='' disabled selected>Activity</option>\";\n        const activityFiltered = options_lists.filter(option_list => \n            (option_list.option_type === 'Activity' || option_list.option_type === 'Activity ICVD') && \n            option_list.output == selectedValue\n        );\n        activityFiltered.forEach(option_list => {\n            select_output.innerHTML += `<option value=\"${option_list.name}\">${option_list.option_name}</option>`;\n        });\n    }).catch(error => {\n        console.error('Error fetching options:', error);\n    });\n};\nselect_output.addEventListener('change', function() {\n    var selectedOutput = select_output.options[select_output.selectedIndex];\n    var selectedOutputValue = selectedOutput.value;\n    output(selectedOutputValue);\n});\n\nlet form_name;\nlet output_nameid;\nlet activity_nameid;\n\nselectElement.addEventListener('change', function() {\n    var selectedOption = selectElement.options[selectElement.selectedIndex];\n    var selectedValue = selectedOption.value;\n    form_name = selectedValue;\n});\nselect_output.addEventListener('change', function() {\n    var selectedOutput = select_output.options[select_output.selectedIndex];\n    var selectedOutputValue = selectedOutput.value;\n    output_nameid = selectedOutputValue\n});\nselect_activity.addEventListener('change', function() {\n    var selectActivity = select_activity.options[select_activity.selectedIndex];\n    var selectedActivityValue = selectActivity.value;\n    activity_nameid = selectedActivityValue\n});\n\napply_filter.addEventListener('click', function() {\n    console.log('adddata');\n    // console.log(selectedOutputValue)\n    console.log('form_name', form_name);\n    console.log('output_nameid', output_nameid);\n    console.log('activity_nameid', activity_nameid);\n    let fields;\n\n    if(form_name === \"Activity CR4SD\" || form_name === \"Activity ICVD\"){\n        fields = [\"name\", \"output\", \"activity\", \"workflow_state\"];\n    } else {\n        fields = [\"name\", \"output\", \"workflow_state\"];\n    }\n    callAPI({\n      method: 'rt_bij.api.common_api',\n      freeze: true,\n      args: {\n          doctype_name: form_name,\n          fields: fields\n      },\n      freeze_message: __(\"Getting States\"),\n    }).then(form_lists => {\n        console.log('form_lists', form_lists);\n        const pending_data = form_lists.filter(form_list => form_list.activity === activity_nameid &&\n        form_list.output === output_nameid && \n        form_list.workflow_state === \"Pending\");\n        const approved_data = form_lists.filter(form_list => form_list.activity === activity_nameid &&\n        form_list.output === output_nameid && \n        form_list.workflow_state === \"Approved\");\n        console.log('pending_data',pending_data)\n        console.log('approved_data',approved_data)\n    });\n});\n\n\n\n\n\n\n",
  "style": "* {\n            margin: 0;\n            padding: 0;\n        }\n\n        .flexbox {\n            width: 100%;\n            display: flex;\n            padding-bottom: 5px;\n        }\n\n        .flexboxIn1 {\n            width: 60%;\n        }\n        .custom-select{\n            width:auto;\n        }\n        .dropdown{\n            width : 22%;\n            padding: 5px 15px;\n            font-size: 16px;\n            border-radius: 5px;\n            color: black;\n            background-color: rgb(243, 243, 243);\n            border: none;\n            outline: none;\n            cursor: pointer;\n        }\n        .flexboxIn2 {\n            width: 40%;\n            display: flex;\n            gap: 5px;\n            justify-content: end;\n        }\n        .dropdown_s2{\n            /*width : 20%;*/\n            padding: 5px 15px;\n            font-size: 16px;\n            border-radius: 5px;\n            color: black;\n            background-color: rgb(243, 243, 243);\n            border: none;\n            outline: none;\n            cursor: pointer;\n        }\n        .footer {\n            width: 100%;\n            padding: 10px 0px;\n            background-color: rgb(243, 243, 243);\n            padding-left: 10px;\n            border-radius: 5px;\n        }\n        .container-fluid{\n            margin:0!important;\n            padding:0!important;\n        }\n        "
 }
]